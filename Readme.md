# プロジェクトの管理方法
* gitでproject作成に必要なソースのみ管理するようにして、ソースからprojectを再生成できるようにしてある。
* 開発段階を想定しているので、ブロックデザインは考慮せずRTLソースとIP(.xci),テストベンチソース,制約ファイル(.xdc)のみを管理するようにし、そこからプロジェクトを再生成する。


## 使う前に確認してほしいこと
* `clean.bat`と`create_project.bat`ファイル内のProject_Name変数が一致していること。.batファイル内のProject_Nameが`create_project.bat`で作成されるプロジェクト名になるので、プロジェクト名を変えたいときはここを編集する。


## 編集するときの流れ
1. git clone ...　でこのリポジトリをclone
2. create_project.batでソースからプロジェクトを再生成。ソースをそのまま編集するのであれば、プロジェクトを再合成する必要なし。
3. プロジェクトを編集
    * 新しくソースファイルを追加するときはsrcディレクトリ内の適切なパスに格納すること。
    * sources_1などのファイルセットはsrcディレクトリ内のファイルがリンクされているので、Vivado上で編集すると、srcファイル内のデータが更新される。
    * 新しくvivado上でファイルを追加するときは、srcディレクトリ内に格納すること。
4. git add srcでsrcフォルダだけ更新する。
    * clean.batを使用して、git add .ですべて更新しても良い。
5. git commit, git pushでgitを更新。

## srcディレクトリの構成
```
src/rtl        : RTLソース(.v, .sv, .vh)格納フォルダ
src/ip         : IP(.xci)格納フォルダ
src/sim        : テストベンチ用RTL(.v, .sv, .vh)格納フォルダ
src/constraint : 制約ファイル格納フォルダ
```
* gitだと、空のフォルダを管理できないので、上記フォルダが存在しないときは自分で作成すること。

* tclコマンドでのファイル検索が検索ディレクトリの中にフォルダがあるとめんどくさかったので、上記ディレクトリの中にフォルダは作らないこと。(src/rtl/folder1みたいにsrc/rtlの中にフォルダを作らない。)src/rtlの下にそのままソースファイルを格納していく。Vivado上では自動で依存関係とか調整してくれるので、そこまで使いづらいとかはないと思う。


## 各ファイル/フォルダの説明
```
clean.bat          : vivadoでprojectを再生成するときに作られるログ・ファイルやプロジェクトファイルを削除する。
create_project.bat : 内部でcreate_project.tclを呼び出して、projectを再生成する。
src/create_project.tcl : 直接は起動しない。create_project.batによって起動される。
src                : プロジェクトを再生成するためのソース・ファイルを格納するディレクトリ。
```


